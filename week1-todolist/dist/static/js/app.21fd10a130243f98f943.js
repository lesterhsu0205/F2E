webpackJsonp([1],{"/52u":function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("7+uW"),s=o("mtWM"),i=o.n(s),d=o("Rf8U"),n=o.n(d),c=(o("oPmM"),o("pc4J"),o("Dd8w")),r=o.n(c),l={name:"Item",props:["todo"],methods:{updateStatus:function(t,e){var o=this,a="http://localhost:5000/todos/"+o.todo.id,s=r()({},o.todo);s[t]=e,o.$http.put(a,s).then(function(t){console.log(t),o.$emit("updateData")})},editTodo:function(){this.$emit("editTodo",this.todo.id)}}},m={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"mb-4"},[o("div",{staticClass:"todo-item",class:{stared:t.todo.stared}},[t._m(0),t._v(" "),o("div",{staticClass:"todo-header"},[o("div",{staticClass:"todo-check"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.todo.completed,expression:"todo.completed"}],attrs:{type:"checkbox",id:"todo-check-"+t.todo.id,"true-value":"completed","false-value":"progress"},domProps:{checked:Array.isArray(t.todo.completed)?t._i(t.todo.completed,null)>-1:t._q(t.todo.completed,"completed")},on:{change:[function(e){var o=t.todo.completed,a=e.target,s=a.checked?"completed":"progress";if(Array.isArray(o)){var i=t._i(o,null);a.checked?i<0&&t.$set(t.todo,"completed",o.concat([null])):i>-1&&t.$set(t.todo,"completed",o.slice(0,i).concat(o.slice(i+1)))}else t.$set(t.todo,"completed",s)},function(e){t.updateStatus("completed",t.todo.completed)}]}}),t._v(" "),o("label",{attrs:{for:"todo-check-"+t.todo.id}})]),t._v(" "),o("label",{staticClass:"todo-title",attrs:{for:"todo-check-"+t.todo.id}},[o("span",{class:{completed:"completed"===t.todo.completed}},[t._v(t._s(t.todo.message))])]),t._v(" "),o("div",{staticClass:"todo-control"},[o("a",{staticClass:"text-muted",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.updateStatus("stared",!t.todo.stared)}}},[t.todo.stared?o("i",{staticClass:"fas fa-star mr-3"}):o("i",{staticClass:"far fa-star mr-3"})]),t._v(" "),o("a",{staticClass:"text-muted",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.editTodo(e)}}},[o("i",{staticClass:"fas fa-pencil-alt"})])])]),t._v(" "),o("div",{staticClass:"todo-footer text-secondary"},[t.todo.startDate||t.todo.endDate?o("i",{staticClass:"far fa-calendar-alt"}):t._e(),t._v(" "),o("span",[t._v("from: "+t._s(t.todo.endDate))]),t._v(" "),t.todo.startDate&&t.todo.endDate?o("span",[t._v(" ~ ")]):t._e(),t._v(" "),o("span",[t._v("to: "+t._s(t.todo.endDate))]),t._v(" "),o("i",{staticClass:"fas fa-comment-dots ml-3"}),t._v(" "+t._s(t.todo.comments.length)+"\n    ")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"handle text-muted"},[e("i",{staticClass:"fas fa-ellipsis-v"})])}]},u=o("VU/8")(l,m,!1,null,null,null).exports,p={name:"EditForm",props:["todo"],data:function(){return{cacheTodo:{},comment:"",isNew:!1}},methods:{updateComment:function(){var t=this,e="http://localhost:5000/todos/"+t.todo.id;if(t.comment){var o=r()({},t.todo);o.comments.push(t.comment),t.$http.put(e,o).then(function(e){console.log(e),t.comment="",t.$emit("updateData")})}},updateTodo:function(){var t=this,e=r()({},t.cacheTodo);if(t.cacheTodo.message)if(this.isNew){var o=t.api.getTodoList;e.timestamp=Math.floor(Date.now()/1e3),e.stared=!1,e.completed="progress",e.comments=[],t.$http.post(o,e).then(function(e){t.$emit("closeEditTodo"),t.$emit("updateData")})}else{var a="http://localhost:5000/todos/"+t.todo.id;t.$http.put(a,e).then(function(e){console.log(e),t.$emit("closeEditTodo"),t.$emit("updateData")})}else alert("請輸入訊息")},closeEdit:function(){this.$emit("closeEditTodo")}},watch:{todo:function(){this.cacheTodo=r()({},this.todo)}},created:function(){this.todo?this.cacheTodo=r()({},this.todo):this.isNew=!0}},v={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"mb-4"},[o("div",{staticClass:"todo-item active"},[o("div",{staticClass:"todo-header"},[o("div",{staticClass:"todo-check"}),t._v(" "),o("div",{staticClass:"todo-title"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.cacheTodo.message,expression:"cacheTodo.message"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.cacheTodo.message},on:{input:function(e){e.target.composing||t.$set(t.cacheTodo,"message",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"todo-body"},[o("div",{staticClass:"todo-content"},[o("div",{staticClass:"todo-row"},[t._m(0),t._v(" "),o("div",[o("label",{attrs:{for:""}},[t._v("Deadline")]),t._v(" "),o("div",{staticClass:"form-inline todo-form-control"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.cacheTodo.startDate,expression:"cacheTodo.startDate"}],staticClass:"form-control border-0",attrs:{type:"date"},domProps:{value:t.cacheTodo.startDate},on:{input:function(e){e.target.composing||t.$set(t.cacheTodo,"startDate",e.target.value)}}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.cacheTodo.endDate,expression:"cacheTodo.endDate"}],staticClass:"form-control border-0 ml-2",attrs:{type:"date"},domProps:{value:t.cacheTodo.endDate},on:{input:function(e){e.target.composing||t.$set(t.cacheTodo,"endDate",e.target.value)}}})])])]),t._v(" "),t.todo?o("div",{staticClass:"todo-row"},[t._m(1),t._v(" "),o("div",{staticClass:"todo-form-control"},[o("label",{attrs:{for:""}},[t._v("Comment")]),t._v(" "),t._l(t.cacheTodo.comments,function(e,a){return o("div",{key:a,staticClass:"bg-white p-3 my-3"},[t._v(t._s(e))])}),t._v(" "),o("div",[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"form-control w-100 border-0",attrs:{name:""},domProps:{value:t.comment},on:{keydown:function(e){return("button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter"))&&e.shiftKey?t.updateComment(e):null},input:function(e){e.target.composing||(t.comment=e.target.value)}}})])],2)]):t._e()]),t._v(" "),o("div",{staticClass:"todo-btn-group d-flex"},[o("button",{staticClass:"btn text-danger w-50 btn-lg",on:{click:t.closeEdit}},[o("i",{staticClass:"fas fa-times"}),t._v(" Cancel\n        ")]),t._v(" "),o("button",{staticClass:"btn btn-primary w-50 btn-lg",on:{click:t.updateTodo}},[o("i",{staticClass:"fas fa-plus"}),t._v(" Update Task\n        ")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"todo-icon"},[e("i",{staticClass:"far fa-calendar-alt"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"todo-icon"},[e("i",{staticClass:"far fa-comment-dots"})])}]},f=o("VU/8")(p,v,!1,null,null,null).exports,h=o("DAYN"),_={name:"App",components:{Item:u,EditForm:f,draggable:o.n(h).a},mounted:function(){this.getData()},data:function(){return{message:"",todoItem:[],currentEdit:{},isNewTodo:!1,currentTab:"myTask"}},methods:{add:function(){this.isNewTodo=!0,this.currentEdit={}},getData:function(){var t=this;t.todoItem=[],t.$http.get(t.api.getTodoList).then(function(e){e.data.forEach(function(e){t.todoItem.push(e)}),t.todoItem.sort(function(t,e){return t.order>e.order?1:-1})})},edit:function(t){this.isNewTodo=!1,this.currentEdit=this.todoItem.find(function(e){return e.id===t})},closeEdit:function(){this.isNewTodo=!1,this.currentEdit={}},sort:function(){var t=this;t.todoItem.map(function(t,e){return{id:t.id,order:e}}).forEach(function(e){t.$http.patch(t.api.getTodoList.concat("/",e.id),{order:e.order})})}}},g={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("div",{staticClass:"bg-primary"},[o("div",{staticClass:"container justify-content-between d-flex todo-nav"},[o("a",{class:{active:"myTask"===t.currentTab},attrs:{href:"#"},on:{click:function(e){t.currentTab="myTask"}}},[t._v("My Task")]),t._v(" "),o("a",{class:{active:"progress"===t.currentTab},attrs:{href:"#"},on:{click:function(e){t.currentTab="progress"}}},[t._v("In Progress")]),t._v(" "),o("a",{class:{active:"completed"===t.currentTab},attrs:{href:"#"},on:{click:function(e){t.currentTab="completed"}}},[t._v("Completed")])])]),t._v(" "),o("div",{staticClass:"container my-4"},[o("div",{staticClass:"position-relative"},[o("i",{staticClass:"fas fa-plus fa-lg text-black-50 position-absolute",staticStyle:{left:"1rem",top:"1.15rem"}}),t._v(" "),t.isNewTodo?t._e():o("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"form-control form-control-lg pl-5",attrs:{type:"text"},domProps:{value:t.message},on:{focus:t.add,input:function(e){e.target.composing||(t.message=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"mt-4"},[o("transition",{attrs:{name:"slide"}},[t.isNewTodo&&!t.currentEdit.id?o("edit-todo",{on:{updateData:t.getData,closeEditTodo:t.closeEdit}}):t._e()],1),t._v(" "),o("draggable",{attrs:{options:{handle:".handle"}},on:{end:t.sort},model:{value:t.todoItem,callback:function(e){t.todoItem=e},expression:"todoItem"}},t._l(t.todoItem,function(e){return"myTask"===t.currentTab||t.currentTab==e.completed?o("div",{key:e.id},[Object.is(t.currentEdit.id,e.id)?t._e():o("item",{attrs:{todo:e},on:{updateData:t.getData,editTodo:t.edit}}),t._v(" "),Object.is(t.currentEdit.id,e.id)?o("edit-form",{attrs:{todo:t.currentEdit},on:{updateData:t.getData,closeEditTodo:t.closeEdit}}):t._e()],1):t._e()}))],1)])])},staticRenderFns:[]};var T=o("VU/8")(_,g,!1,function(t){o("/52u")},null,null).exports;a.a.use(n.a,i.a),a.a.config.productionTip=!1,a.a.prototype.api={getTodoList:"http://localhost:3000/todoItems"},new a.a({el:"#app",components:{App:T},template:"<App/>"})},oPmM:function(t,e){},pc4J:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.21fd10a130243f98f943.js.map